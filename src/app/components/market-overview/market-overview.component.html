<section class="overview">
  <h2>Market Overview</h2>
  <div class="grid">
    @if (indices$ | async; as indices) {
      @for (i of indices; track i.symbol) {
        <div class="card" [class.up]="i.change > 0" [class.down]="i.change < 0">
          <div class="name">{{ i.name }}</div>
          <div class="price">{{ i.price | number:'1.2-2' }}</div>
          <div class="change" [attr.aria-label]="i.change">
            <span>{{ i.change > 0 ? '▲' : i.change < 0 ? '▼' : '•' }}</span>
            <span>{{ i.change | number:'1.2-2' }} ({{ i.changePercent }}%)</span>
          </div>
          <div class="spark">
            <app-sparkline [values]="i.history || []" [stroke]="i.change >= 0 ? '#0a7d22' : '#b00020'"></app-sparkline>
          </div>
        </div>
      }
    } @else {
      <div class="loading">Loading indices…</div>
    }
  </div>
</section>


