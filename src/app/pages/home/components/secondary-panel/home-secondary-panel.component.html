<aside class="layout__secondary">
  <div class="results-card">
    <div class="results-card__header">
      <h2>Results</h2>
    </div>
    <ul class="results-list">
      @if (results$ | async; as results) {
        @for (result of results; track result.symbol) {
          <li
            class="results-list__item"
            [class.is-positive]="result.changePercent >= 0"
            [class.is-negative]="result.changePercent < 0"
            [class.is-highlight]="result.highlight"
            role="button"
            tabindex="0"
            (click)="selectStock.emit(result.symbol)"
            (keyup.enter)="selectStock.emit(result.symbol)"
            [attr.aria-label]="'View details for ' + result.symbol">
            <div class="results-list__meta">
              <span class="results-list__symbol">{{ result.symbol }}</span>
              <span class="results-list__company">{{ result.company }}</span>
            </div>
            <div class="results-list__quote">
              <span class="results-list__price">CA${{ result.price | number:'1.2-2' }}</span>
              <span class="results-list__change">
                <svg viewBox="0 0 12 12" aria-hidden="true" [class.flip]="result.changePercent < 0">
                  <path d="M1 7l5-5 5 5" />
                </svg>
                CA${{ result.changeValue | number:'1.2-2' }} ({{ result.changePercent | number:'1.2-2' }}%)
              </span>
            </div>
          </li>
        }
      } @else {
        <li class="results-list__placeholder">No results available.</li>
      }
    </ul>
    <footer class="results-card__footer">
      <p>Educational only. Not investment advice.</p>
      <p>Data as of {{ (asOf$ | async) | date:'MMM d, y h:mm a z' }}</p>
    </footer>
  </div>
</aside>
